<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Buffet Manager Pro</title>
    <style>
        :root { --primary: #2c3e50; --accent: #27ae60; --danger: #e74c3c; }
        body { font-family: Arial, sans-serif; margin: 0; display: flex; background: #f4f7f6; }
        
        /* Sidebar */
        nav { width: 250px; background: var(--primary); color: white; height: 100vh; padding: 20px; position: fixed; }
        nav h2 { font-size: 1.2rem; border-bottom: 1px solid #555; padding-bottom: 10px; }
        nav button { width: 100%; padding: 10px; margin: 5px 0; cursor: pointer; background: transparent; border: 1px solid #555; color: white; text-align: left; }
        nav button:hover { background: #34495e; }

        /* Main Content */
        main { margin-left: 290px; padding: 20px; width: calc(100% - 320px); }
        .card { background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); margin-bottom: 20px; }
        
        table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        th, td { padding: 12px; border-bottom: 1px solid #ddd; text-align: left; }
        th { background: #eee; }
        
        .stock-low { color: var(--danger); font-weight: bold; }
        .btn-action { background: var(--accent); color: white; border: none; padding: 8px 15px; border-radius: 4px; cursor: pointer; }
        
        .hidden { display: none; }
    </style>
</head>
<body>

<nav>
    <h2>BUFFET MANAGER</h2>
    <button onclick="showPage('funcionario')">üìä Estoque Geral</button>
    <button onclick="showPage('cliente')">üç¥ Menu de Propostas</button>
    <div id="alerts" style="margin-top: 20px; font-size: 0.8rem;"></div>
</nav>

<main>
    <!-- PAGINA FUNCIONARIO (VISTA INICIAL) -->
    <div id="page-funcionario">
        <h1>Gest√£o de Estoque e Equipamentos</h1>
        
        <div class="card">
            <h3>üì¶ C√¢maras e Prateleiras</h3>
            <table id="table-camaras">
                <thead>
                    <tr><th>Item</th><th>C√¢mara</th><th>Estante</th><th>Qtd</th><th>A√ß√£o</th></tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>

        <div class="card">
            <h3>‚ùÑÔ∏è Freezers e Gavetas</h3>
            <table id="table-freezers">
                <thead>
                    <tr><th>Item</th><th>Freezer</th><th>Gaveta</th><th>Qtd</th><th>A√ß√£o</th></tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>

        <div class="card">
            <h3>‚ö° Equipamentos Eletr√¥nicos</h3>
            <table id="table-equip">
                <thead>
                    <tr><th>Equipamento</th><th>Info T√©cnica</th><th>Status</th><th>A√ß√£o</th></tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>
    </div>

    <!-- PAGINA CLIENTE -->
    <div id="page-cliente" class="hidden">
        <h1>Propostas de Buffet</h1>
        <div class="card">
            <h3>Selecione o Servi√ßo</h3>
            <select id="select-servico" onchange="checkAvailability()">
                <option value="">Escolha...</option>
                <option value="Cafe">Caf√© da Manh√£</option>
                <option value="Almoco">Almo√ßo</option>
                <option value="Janta">Jantar</option>
                <option value="Cocktail">Coquetelaria</option>
            </select>
            <div id="client-msg" style="margin-top:20px"></div>
        </div>
    </div>
</main>

<script>
    // Dados Iniciais
    let estoque = JSON.parse(localStorage.getItem('buffet_stock')) || [
        { id: 1, nome: "Caf√© Ar√°bica", tipo: "Camara", loc: "C√¢mara 1", sub: "Estante A", qtd: 40, min: 10, cat: "Cafe" },
        { id: 2, nome: "Fil√© Mignon", tipo: "Freezer", loc: "Freezer 2", sub: "Gaveta 3", qtd: 15, min: 5, cat: "Almoco" },
        { id: 3, nome: "Forno Turbo", tipo: "Equip", loc: "Cozinha", sub: "220V", qtd: 1, min: 0, status: "OK" }
    ];

    function renderStock() {
        const tables = {
            Camara: document.querySelector("#table-camaras tbody"),
            Freezer: document.querySelector("#table-freezers tbody"),
            Equip: document.querySelector("#table-equip tbody")
        };
        
        Object.values(tables).forEach(t => t.innerHTML = "");
        let alertsHTML = "<strong>Alertas:</strong><br>";

        estoque.forEach(item => {
            const row = `<tr>
                <td>${item.nome}</td>
                <td>${item.loc}</td>
                <td>${item.sub}</td>
                <td class="${item.qtd <= item.min ? 'stock-low' : ''}">${item.qtd}</td>
                <td><button class="btn-action" onclick="changeStock(${item.id}, -1)">-1</button> 
                    <button class="btn-action" onclick="changeStock(${item.id}, 1)">+1</button></td>
            </tr>`;
            
            if(item.tipo === "Equip") {
                tables.Equip.innerHTML += `<tr><td>${item.nome}</td><td>${item.sub}</td><td>${item.status}</td><td><button class="btn-action">Info</button></td></tr>`;
            } else {
                tables[item.tipo].innerHTML += row;
            }

            if(item.qtd <= item.min && item.tipo !== "Equip") {
                alertsHTML += `<span style="color:#ff6b6b">‚ö†Ô∏è Repor ${item.nome}</span><br>`;
            }
        });
        document.getElementById('alerts').innerHTML = alertsHTML;
        localStorage.setItem('buffet_stock', JSON.stringify(estoque));
    }

    function changeStock(id, val) {
        const item = estoque.find(i => i.id === id);
        if(item) {
            item.qtd = Math.max(0, item.qtd + val);
            renderStock();
        }
    }

    function showPage(page) {
        document.getElementById('page-funcionario').classList.toggle('hidden', page !== 'funcionario');
        document.getElementById('page-cliente').classList.toggle('hidden', page !== 'cliente');
    }

    function checkAvailability() {
        const servico = document.getElementById('select-servico').value;
        const itensServico = estoque.filter(i => i.cat === servico);
        const msg = document.getElementById('client-msg');
        
        if(itensServico.length > 0 && itensServico.every(i => i.qtd > 0)) {
            msg.innerHTML = `<p style="color:green">‚úÖ Itens em estoque! Podemos realizar seu ${servico}.</p>`;
        } else {
            msg.innerHTML = `<p style="color:red">‚ùå Desculpe, insumos insuficientes para este servi√ßo.</p>`;
        }
    }

    // Iniciar
    renderStock();
</script>

</body>
</html>
